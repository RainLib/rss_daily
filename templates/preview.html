<div class="repo-card">
    <div class="rank-badge {{rank_class}}">
        <span class="rank-number">{{rank_text}}</span>
    </div>
    <div class="card-bg"></div>
    <div class="card-content">
        <!-- Left: Project Avatar -->
        <div class="card-left">
            <img src="{{avatar_url}}" alt="{{owner_login}}" class="project-avatar" />
            <div class="qr-container">
                {{qrcode}}
                <span class="scan-text">SCAN TO VIEW</span>
            </div>
        </div>

        <!-- Right: Content -->
        <div class="card-right">
            <!-- Header -->
            <div class="card-header">
                <div class="repo-meta">
                    <span class="repo-author">{{owner_login}}</span>
                    <span class="divider">/</span>
                    <h1 class="repo-title">{{repo_name}}</h1>
                </div>
            </div>

            <!-- Stats Row -->
            <div class="stat-row">
                <div class="lang-badge">
                    <span class="lang-dot" style="background-color: {{lang_color}}"></span>
                    <span class="lang-name">{{language}}</span>
                </div>
                <div class="stat-item tooltip">
                    <span class="icon">‚≠ê</span>
                    <span class="value">{{stars}}</span>
                </div>
                <div class="stat-item tooltip">
                    <span class="icon">üî±</span>
                    <span class="value">{{forks}}</span>
                </div>
                <div class="stat-item tooltip">
                    <span class="icon">
                        <svg viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                            <path
                                d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm9 3a1 1 0 11-2 0 1 1 0 012 0zm-.25-6.25a.75.75 0 00-1.5 0v3.5a.75.75 0 001.5 0v-3.5z">
                            </path>
                        </svg>
                    </span>
                    <span class="value">{{open_issues}}</span>
                </div>
                <div class="stat-item tooltip">
                    <span class="icon">
                        <svg viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                            <path
                                d="M4.75 0a.75.75 0 01.75.75V2h5V.75a.75.75 0 011.5 0V2h1.25c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0113.25 16H2.75A1.75 1.75 0 011 14.25V3.75C1 2.784 1.784 2 2.75 2H4V.75A.75.75 0 014.75 0zm0 3.5h8.5a.25.25 0 01.25.25V6h-11V3.75a.25.25 0 01.25-.25h2zm-2.25 4v6.75c0 .138.112.25.25.25h10.5a.25.25 0 00.25-.25V7.5h-11z">
                            </path>
                        </svg>
                    </span>
                    <span class="value" style="font-size: 14px">{{created_at}}</span>
                </div>
            </div>

            <!-- Description (Limited lines) -->
            <p class="repo-desc">{{description}}</p>

            <!-- Footer: Source Attribution -->
            <div class="card-footer">
                <span class="source-text">Generated by <span class="highlight">{{source_repo}}</span></span>
            </div>
        </div>
    </div>
</div>

<style>
    @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');

    * {
        box-sizing: border-box;
    }

    body {
        margin: 0;
        padding: 0;
        width: 1000px;
        height: 350px;
        background: transparent;
        overflow: hidden;
    }

    .repo-card {
        position: relative;
        width: 100%;
        height: 100%;
        background: #0D1117;
        border-radius: 24px;
        overflow: hidden;
        font-family: 'Plus Jakarta Sans', sans-serif;
        color: #E6EDF3;
        display: flex;
        align-items: center;
        box-shadow: 0 50px 100px -20px rgba(0, 0, 0, 0.5);
    }

    /* Background Gradients */
    .card-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background:
            radial-gradient(circle at 100% 0%, rgba(56, 189, 248, 0.1) 0%, transparent 50%),
            radial-gradient(circle at 0% 100%, rgba(168, 85, 247, 0.1) 0%, transparent 50%);
        z-index: 0;
    }

    .card-content {
        position: relative;
        z-index: 2;
        display: flex;
        width: 100%;
        height: 100%;
        padding: 24px;
        gap: 32px;
    }

    /* Left Column */
    .card-left {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
        width: 120px;
        flex-shrink: 0;
        position: relative;
        /* Context for absolute badge */
        overflow: visible;
        /* Allow badge to pop out */
    }

    .project-avatar {
        width: 100px;
        height: 100px;
        border-radius: 20px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
    }

    .qr-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 6px;
        background: white;
        padding: 8px;
        border-radius: 12px;
        width: 100px;
        height: 100px;
    }

    .qr-container svg {
        width: 100%;
        height: 100%;
    }

    .scan-text {
        color: #0D1117;
        font-size: 8px;
        font-weight: 800;
        letter-spacing: 0.5px;
        display: none;
        /* Hide text if too cluttered, or keep small */
    }

    /* Right Column */
    .card-right {
        flex: 1;
        display: flex;
        flex-direction: column;
        min-width: 0;
    }

    /* Header */
    .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        /* Center alignment for badge */
        margin-bottom: 8px;
        width: 100%;
    }

    .repo-meta {
        display: flex;
        flex-direction: row;
        /* Horizontal alignment */
        align-items: baseline;
        gap: 12px;
        overflow: hidden;
        flex: 1;
        /* Take available space */
        min-width: 0;
    }

    .repo-author {
        font-size: 20px;
        color: #7D8590;
        font-weight: 500;
        white-space: nowrap;
    }

    .divider {
        font-size: 20px;
        color: #30363D;
    }

    .repo-title {
        margin: 0;
        font-size: 32px;
        font-weight: 800;
        letter-spacing: -0.5px;
        background: linear-gradient(90deg, #FFFFFF, #E6EDF3);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        padding-right: 12px;
    }

    .lang-badge {
        display: flex;
        align-items: center;
        gap: 6px;
        background: rgba(255, 255, 255, 0.08);
        padding: 4px 12px;
        border-radius: 100px;
        border: 1px solid rgba(255, 255, 255, 0.05);
        flex-shrink: 0;
        /* Prevent badge from shrinking */
    }

    .lang-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
    }

    .lang-name {
        font-family: 'JetBrains Mono';
        font-size: 12px;
        font-weight: 700;
        color: #E6EDF3;
    }

    /* Stats Row */
    .stat-row {
        display: flex;
        gap: 24px;
        margin-bottom: 12px;
        background: rgba(255, 255, 255, 0.03);
        padding: 12px 20px;
        border-radius: 12px;
        width: fit-content;
    }

    .stat-item {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .icon {
        font-size: 16px;
        opacity: 0.8;
    }

    .icon svg {
        display: block;
    }

    .value {
        font-size: 15px;
        font-weight: 600;
        font-family: 'JetBrains Mono';
        color: #E6EDF3;
    }

    /* Description */
    .repo-desc {
        font-size: 16px;
        line-height: 1.6;
        color: #8B949E;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        /* Strict 2 lines restriction */
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* Footer */
    .card-footer {
        display: flex;
        justify-content: flex-end;
        align-items: center;
        padding-top: 10px;
        border-top: 1px solid rgba(255, 255, 255, 0.08);
        margin-top: auto;
        /* Push to bottom */
    }

    .source-text {
        font-size: 12px;
        color: #484F58;
        font-weight: 500;
        font-family: 'JetBrains Mono';
    }

    .highlight {
        color: #58A6FF;
    }

    /* Rank Badges - Bold Layout */
    .rank-badge {
        position: absolute;
        top: 0;
        right: 0;
        /* Scaled for extreme compactness (350px) */
        width: 130px;
        height: 100px;
        display: flex;
        align-items: flex-start;
        /* Align text to top-right area */
        justify-content: flex-end;
        padding-top: 15px;
        padding-right: 25px;

        /* The Shape: Scaled convex curve */
        border-bottom-left-radius: 90px;

        z-index: 1;
        /* Behind content (card-content is z-index 2) */

        /* Glass/Layered Effect */
        backdrop-filter: blur(10px);
        box-shadow:
            -5px 5px 20px rgba(0, 0, 0, 0.2),
            inset 2px -2px 10px rgba(255, 255, 255, 0.05);

        font-family: 'Plus Jakarta Sans', sans-serif;
        font-weight: 900;
        font-size: 36px;
        /* Reduced size */
        letter-spacing: -2px;
    }

    .rank-number {
        position: relative;
        z-index: 2;
        display: flex;
        flex-direction: column;
        align-items: center;
        line-height: 1;
    }

    /* Optional: Add "NO." label small above number */
    .rank-number::before {
        content: "NO.";
        font-size: 12px;
        letter-spacing: 2px;
        opacity: 0.6;
        margin-bottom: 4px;
        font-weight: 700;
    }

    /* Rank 1: Gold Theme */
    .rank-1 {
        background: linear-gradient(225deg, rgba(255, 215, 0, 0.15) 0%, rgba(253, 185, 49, 0.05) 100%);
        color: #FDB931;
        border-left: 1px solid rgba(255, 215, 0, 0.2);
        border-bottom: 1px solid rgba(255, 215, 0, 0.2);
        box-shadow: -10px 10px 30px -10px rgba(255, 215, 0, 0.1);
    }

    .rank-1 .rank-number {
        background: linear-gradient(180deg, #FFD700 0%, #FDB931 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.4));
    }

    /* Rank 2: Silver Theme */
    .rank-2 {
        background: linear-gradient(225deg, rgba(224, 224, 224, 0.15) 0%, rgba(189, 189, 189, 0.05) 100%);
        color: #E0E0E0;
        border-left: 1px solid rgba(255, 255, 255, 0.15);
        border-bottom: 1px solid rgba(255, 255, 255, 0.15);
    }

    .rank-2 .rank-number {
        background: linear-gradient(180deg, #FFFFFF 0%, #BDBDBD 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.2));
    }

    /* Rank 3: Bronze Theme */
    .rank-3 {
        background: linear-gradient(225deg, rgba(255, 171, 145, 0.15) 0%, rgba(216, 67, 21, 0.05) 100%);
        color: #FFAB91;
        border-left: 1px solid rgba(255, 87, 34, 0.2);
        border-bottom: 1px solid rgba(255, 87, 34, 0.2);
    }

    .rank-3 .rank-number {
        background: linear-gradient(180deg, #FFAB91 0%, #D84315 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        filter: drop-shadow(0 0 10px rgba(255, 87, 34, 0.2));
    }

    /* Normal Rank */
    .rank-normal {
        display: none;
    }

    .icon svg {
        display: block;
    }

    /* Normal Rank */
    .rank-normal {
        display: none;
        /* Hide rank badge for > 3 */
    }
</style>
